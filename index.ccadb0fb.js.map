{"mappings":"AAEA,MAAMA,EAASC,SAASC,cAAc,gBAChCC,EAAYF,SAASC,cAAc,YACnCE,EAAgBH,SAASC,cAAc,cAEvCG,EAAa,IAAIC,WAEvB,IAAIC,EAAU,IAAIC,eAAe,cAEjCR,EAAOS,iBAAiB,UAGxB,SAA0BC,GACxBA,EAAMC,iBACNR,EAAUS,UAAY,GACtBR,EAAcS,UAAUC,IAAI,aAC5B,MACMC,EADOL,EAAMM,cACMC,SAAsB,YAAEC,MAAMC,OAGvD,GAFAd,EAAWe,EAAIL,GAEVA,EAIH,YAHAM,SAASC,OAAOC,QACd,6EAQNC,iBACE,IACE,MAAMC,KAAEA,SAAepB,EAAWqB,YAElC,GAAuB,IAAnBD,EAAKE,UAIP,YAHAN,SAASC,OAAOC,QACd,4EAIJpB,EAAUS,UAAYgB,cAAcH,EAAKI,MAEzCR,SAASC,OAAOQ,QAAQ,oBAAoBL,EAAKE,qBAEjDpB,EAAQwB,UAEJN,EAAKE,UAAYtB,EAAW2B,UAC9B5B,EAAcS,UAAUoB,OAAO,Y,CAEjC,MAAOC,GACPC,QAAQC,IAAIF,E,EAvBdG,E,IAjBFjC,EAAcK,iBAAiB,SA4C/B,WACEJ,EAAWiC,MAAQ,EAIrBd,iBACE,IACE,MAAMC,KAAEA,SAAepB,EAAWqB,YAalC,GAXAvB,EAAUoC,mBAAmB,YAAaX,cAAcH,EAAKI,OAC7DtB,EAAQwB,UAUJN,EAAKI,KAAKW,OAASnC,EAAW2B,SAChC5B,EAAcS,UAAUC,IAAI,aACrBO,SAASC,OAAOmB,KACrB,6D,CAGJ,MAAOP,GACPC,QAAQC,IAAIF,E,EAzBdQ,E","sources":["src/index.js"],"sourcesContent":["\n\nconst formEl = document.querySelector('.search-form');\nconst galleryEl = document.querySelector('.gallery');\nconst btnLoadMoreEl = document.querySelector('.load-more');\n\nconst pixabayAPI = new PixabayAPI();\n\nlet gallery = new SimpleLightbox('.gallery a');\n\nformEl.addEventListener('submit', handleFormSubmit);\nbtnLoadMoreEl.addEventListener('click', handleLoadMoreBtnClick);\n\nfunction handleFormSubmit(event) {\n  event.preventDefault();\n  galleryEl.innerHTML = '';\n  btnLoadMoreEl.classList.add('is-hidden');\n  const form = event.currentTarget;\n  const searchQuery = form.elements['searchQuery'].value.trim();\n  pixabayAPI.q = searchQuery;\n\n  if (!searchQuery) {\n    Notiflix.Notify.failure(\n      'Sorry, there are no images matching your search query. Please try again.'\n    );\n    return;\n  }\n\n  searchGallery();\n}\n\nasync function searchGallery() {\n  try {\n    const { data } = await pixabayAPI.fetchImgs();\n\n    if (data.totalHits === 0) {\n      Notiflix.Notify.failure(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n      return;\n    }\n    galleryEl.innerHTML = createGallery(data.hits);\n\n    Notiflix.Notify.success(`Hooray! We found ${data.totalHits} images.`);\n\n    gallery.refresh();\n\n    if (data.totalHits > pixabayAPI.per_page) {\n      btnLoadMoreEl.classList.remove('is-hidden');\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction handleLoadMoreBtnClick() {\n  pixabayAPI.page += 1;\n  searchLoadMoreImg();\n}\n\nasync function searchLoadMoreImg() {\n  try {\n    const { data } = await pixabayAPI.fetchImgs();\n\n    galleryEl.insertAdjacentHTML('beforeend', createGallery(data.hits));\n    gallery.refresh();\n\n    // const { height: cardHeight } =\n    //   galleryEl.firstElementChild.getBoundingClientRect();\n\n    // window.scrollBy({\n    //   top: cardHeight * 2,\n    //   behavior: 'smooth',\n    // });\n\n    if (data.hits.length < pixabayAPI.per_page) {\n      btnLoadMoreEl.classList.add('is-hidden');\n      return Notiflix.Notify.info(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}"],"names":["$1f0dc3b9307be026$var$formEl","document","querySelector","$1f0dc3b9307be026$var$galleryEl","$1f0dc3b9307be026$var$btnLoadMoreEl","$1f0dc3b9307be026$var$pixabayAPI","PixabayAPI","$1f0dc3b9307be026$var$gallery","SimpleLightbox","addEventListener","event","preventDefault","innerHTML","classList","add","searchQuery","currentTarget","elements","value","trim","q","Notiflix","Notify","failure","async","data","fetchImgs","totalHits","createGallery","hits","success","refresh","per_page","remove","error","console","log","$1f0dc3b9307be026$var$searchGallery","page","insertAdjacentHTML","length","info","$1f0dc3b9307be026$var$searchLoadMoreImg"],"version":3,"file":"index.ccadb0fb.js.map"}